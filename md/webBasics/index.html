<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端基础 首页 | 前端开发体系</title>
    <meta name="description" content="查缺补漏，厚积薄发">
    <link rel="icon" href="/ignore/images/favicon.ico">
  <link rel="manifest" href="/ignore/manifest.json">
  <link rel="stylesheet" href="/ignore/css/style.css">
    
    <link rel="preload" href="/ignore/assets/css/0.styles.5e1793b3.css" as="style"><link rel="preload" href="/ignore/assets/js/app.d92b968c.js" as="script"><link rel="preload" href="/ignore/assets/js/2.6ccafa17.js" as="script"><link rel="preload" href="/ignore/assets/js/20.5acffc1c.js" as="script"><link rel="prefetch" href="/ignore/assets/js/10.82f360dc.js"><link rel="prefetch" href="/ignore/assets/js/11.07d22358.js"><link rel="prefetch" href="/ignore/assets/js/12.0f15bb01.js"><link rel="prefetch" href="/ignore/assets/js/13.40b3c5b2.js"><link rel="prefetch" href="/ignore/assets/js/14.30e91987.js"><link rel="prefetch" href="/ignore/assets/js/15.c203d5cf.js"><link rel="prefetch" href="/ignore/assets/js/16.7071d9de.js"><link rel="prefetch" href="/ignore/assets/js/17.e609493a.js"><link rel="prefetch" href="/ignore/assets/js/18.bb1d0880.js"><link rel="prefetch" href="/ignore/assets/js/19.894f3ebb.js"><link rel="prefetch" href="/ignore/assets/js/21.58033458.js"><link rel="prefetch" href="/ignore/assets/js/3.b805f2bf.js"><link rel="prefetch" href="/ignore/assets/js/4.d245403a.js"><link rel="prefetch" href="/ignore/assets/js/5.2eb3d3f5.js"><link rel="prefetch" href="/ignore/assets/js/6.36851830.js"><link rel="prefetch" href="/ignore/assets/js/7.057f2986.js"><link rel="prefetch" href="/ignore/assets/js/8.05f7db17.js"><link rel="prefetch" href="/ignore/assets/js/9.6408dd6d.js">
    <link rel="stylesheet" href="/ignore/assets/css/0.styles.5e1793b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ignore/" class="home-link router-link-active"><!----> <span class="site-name">前端开发体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ignore/md/resource/resource.html" class="nav-link">资源工具</a></div><div class="nav-item"><a href="/ignore/md/introduction/introduction.html" class="nav-link">导读</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/js/jsBasic/" class="nav-link">JS基础</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/js/es6/" class="nav-link">ES6</a></li><li class="dropdown-item"><h4>JS书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ignore/md/js/book/你不知道的javascript上.html" class="nav-link">你不知道的JavaScript(上)</a></li><li class="dropdown-subitem"><a href="/ignore/md/js/book/你不知道的javascript中.html" class="nav-link">你不知道的JavaScript(中)</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端概括" class="dropdown-title"><span class="title">前端概括</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><h4>解决方案</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">小程序</a></li><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">flutter</a></li><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">uniApp</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">Vue.js</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">jQuery</a></li><li class="dropdown-item"><h4>UI库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">elementUI</a></li><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">MUI</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日积月累" class="dropdown-title"><span class="title">日积月累</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/performance/performance.html" class="nav-link">每日壹题</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码片段" class="dropdown-title"><span class="title">代码片段</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/codeBlock.html" class="nav-link">小模块</a></li></ul></div></div><div class="nav-item"><a href="/ignore/md/about/" class="nav-link">关于我</a></div> <a href="https://github.com/lizheng0515/ignore" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ignore/md/resource/resource.html" class="nav-link">资源工具</a></div><div class="nav-item"><a href="/ignore/md/introduction/introduction.html" class="nav-link">导读</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/js/jsBasic/" class="nav-link">JS基础</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/js/es6/" class="nav-link">ES6</a></li><li class="dropdown-item"><h4>JS书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ignore/md/js/book/你不知道的javascript上.html" class="nav-link">你不知道的JavaScript(上)</a></li><li class="dropdown-subitem"><a href="/ignore/md/js/book/你不知道的javascript中.html" class="nav-link">你不知道的JavaScript(中)</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端概括" class="dropdown-title"><span class="title">前端概括</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><h4>解决方案</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">小程序</a></li><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">flutter</a></li><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">uniApp</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">Vue.js</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/ignore/md/webBasics/.html" class="nav-link">jQuery</a></li><li class="dropdown-item"><h4>UI库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">elementUI</a></li><li class="dropdown-subitem"><a href="/ignore/md/webBasics/.html" class="nav-link">MUI</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日积月累" class="dropdown-title"><span class="title">日积月累</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/performance/performance.html" class="nav-link">每日壹题</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码片段" class="dropdown-title"><span class="title">代码片段</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ignore/md/codeBlock.html" class="nav-link">小模块</a></li></ul></div></div><div class="nav-item"><a href="/ignore/md/about/" class="nav-link">关于我</a></div> <a href="https://github.com/lizheng0515/ignore" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端基础-首页"><a href="#前端基础-首页" class="header-anchor">#</a> 前端基础 首页</h1> <h3 id="序言"><a href="#序言" class="header-anchor">#</a> 序言</h3> <ul><li>已经有好几个大厂有自家的小程序，本文说的小程序默认指的微信小程序。</li> <li>我个人元旦前后业余时间，通过云开发上线了一个小程序，跟大家分享一下小程序云开发。</li> <li>你可以通过此文，配合 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener noreferrer">微信官方文档 · 小程序<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 尝试你的小程序云开发之旅。</li> <li>我这个小程序使用的 基础库版本 &amp;&amp; wx-server-sdk 版本。
<img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9ccbc9c2ede20?w=737&amp;h=195&amp;f=png&amp;s=9871" alt=""> <img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9ccbfb115265e?w=399&amp;h=503&amp;f=png&amp;s=20280" alt=""></li></ul> <h3 id="小程序注册"><a href="#小程序注册" class="header-anchor">#</a> 小程序注册</h3> <p>登录<strong>微信公众平台</strong>，找到 <strong>小程序目录 - 小程序管理 - 添加</strong>，相信大家注册小程序已经游刃有余了。
如有遗忘，可前往 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/getstart.html#%E7%94%B3%E8%AF%B7%E5%B8%90%E5%8F%B7" target="_blank" rel="noopener noreferrer">官方文档 · 注册<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9cbde6b97ac2a?w=1920&amp;h=969&amp;f=png&amp;s=72451" alt="创建微信小程序"></p> <h4 id="新建云开发模板"><a href="#新建云开发模板" class="header-anchor">#</a> 新建云开发模板</h4> <p>新建项目选择一个空目录，填入 <code>AppID</code>（使用云开发能力必须填写 AppID），勾选创建 “云开发 QuickStart 项目”，点击创建即可得到一个展示云开发基础能力的示例小程序。</p> <h4 id="开通云开发、创建环境"><a href="#开通云开发、创建环境" class="header-anchor">#</a> 开通云开发、创建环境</h4> <p>创建了第一个云开发小程序后，在开发者工具工具栏左侧，点击“云开发”按钮即可打开云控制台、根据提示开通云开发、创建云环境。</p> <h4 id="查看控制台"><a href="#查看控制台" class="header-anchor">#</a> 查看控制台</h4> <p>云开发控制台是管理云开发资源的地方，控制台提供以下能力：</p> <ul><li><strong>运营分析</strong>：查看云开发监控、配额使用量、用户访问情况</li> <li><strong>数据库</strong>：管理数据库，可查看、增加、更新、查找、删除数据、管理索引、管理数据库访问权限等</li> <li><strong>存储管理</strong>：查看和管理存储空间</li> <li><strong>云函数</strong>：查看云函数列表、配置、日志</li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9cd1f53fd612b?w=1928&amp;h=1048&amp;f=png&amp;s=70485" alt="云开发控制台">
以上详细介绍可前往 <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看</p> <h4 id="项目目录"><a href="#项目目录" class="header-anchor">#</a> 项目目录</h4> <p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9cdc29feb5adf?w=1928&amp;h=1048&amp;f=png&amp;s=155429" alt=""></p> <h3 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h3> <p>云开发提供了一个 <strong>JSON 数据库</strong>，数据库中的每条记录都是一个JSON格式的对象。一个数据库可以有<strong>多个集合</strong>（相当于关系型数据中的表），集合可看做一个 JSON 数组，数组中的每个对象就是一条记录，记录的格式是 <strong>JSON 对象</strong>。</p> <table><thead><tr><th style="text-align:center;">关系型</th> <th style="text-align:center;">文档型</th></tr></thead> <tbody><tr><td style="text-align:center;">数据库 database</td> <td style="text-align:center;">数据库 database</td></tr> <tr><td style="text-align:center;">表 table</td> <td style="text-align:center;">集合 collection</td></tr> <tr><td style="text-align:center;">行 row</td> <td style="text-align:center;">记录 record / doc</td></tr> <tr><td style="text-align:center;">列 column</td> <td style="text-align:center;">字段 field</td></tr></tbody></table> <p>我的示例<strong>集合</strong>(我们平时说的表)数据：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxx65e0f4b5900349d6127d9c0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;buildingId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxbc5ee75e0f43ef00318efb660fb8&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;buildingName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1号楼&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;roomNumber&quot;</span><span class="token operator">:</span> <span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxx5e0f4b5b003611bd23e4d2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;buildingId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxc5ee75e0f43ef00318e6bb60fb8&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;buildingName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1号楼&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;roomNumber&quot;</span><span class="token operator">:</span> <span class="token string">&quot;102&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxx655025e0f4b5e0026d158651eae&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;buildingId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxx5ee75e0f43ef00318e6bb60fb8&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;buildingName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1号楼&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;roomNumber&quot;</span><span class="token operator">:</span> <span class="token string">&quot;103&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9cecdf5063c80?w=1416&amp;h=943&amp;f=png&amp;s=67162" alt=""></p> <h3 id="创建云函数"><a href="#创建云函数" class="header-anchor">#</a> 创建云函数</h3> <ul><li>微信开发者工具 找到<code>clondfunctions</code> 右键 <strong>新建node.js 云函数</strong>,新建完成。
每一个云函数都有一个 <strong>package.json</strong>文件，我们可以安装<code>node_module</code>包来本地调试云函数（下面再讲调试云函数）。
<img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9d16da843c184?w=726&amp;h=596&amp;f=png&amp;s=50536" alt=""></li> <li>也可以打开 <strong>云开发控制台 - 云函数 - 新建云函数</strong> ，填写完成后确定提交，创建了第一个云函数。
<img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9cf5d950c3ab0?w=1920&amp;h=546&amp;f=png&amp;s=50203" alt=""></li></ul> <h4 id="云函数调用"><a href="#云函数调用" class="header-anchor">#</a> 云函数调用</h4> <p>在创建的云函数的<strong>index.js</strong>文件里处理该云函数的业务逻辑，然后开启本地调试/上传部署该云函数后，在小程序端测试调用。</p> <ul><li><strong>官方示例</strong>：经常，我们需要在云函数中处理一些异步操作，在异步操作完成后再返回结果给到调用方。此时我们可以通过在云函数中返回一个 <code>Promise</code> 的方法来完成。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在 3 秒后返回结果给调用方（小程序 / 其他云函数）</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>a <span class="token operator">+</span> event<span class="token punctuation">.</span>b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>比如云函数名字为 <code>test</code>，，我们在小程序端测试调用：</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 在小程序代码中：</span>
wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">callFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">complete</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'callFunction test result: '</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>此时应该看到调试器输出：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>callFunction test result<span class="token punctuation">:</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>我的示例</strong>：对楼栋数量的增删改查操作。
<img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9d6c73cda0c79?w=595&amp;h=350&amp;f=png&amp;s=21352" alt="">
云函数入口函数<code>main</code>:
<img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9d7970b7bc010?w=832&amp;h=712&amp;f=png&amp;s=38704" alt="">
创建楼栋号的方法：
<ol><li><code>handleCreate()</code>这个方法里用<code>promise()</code>包起来是因为需要图示77行 <code>buildingsCollection.where()</code>的返回结果来做后续处理。</li> <li>头部注释为小程序端调用 <code>operateBuilding</code> 这个云函数demo。</li></ol></li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9d94e8e585513?w=615&amp;h=691&amp;f=png&amp;s=34323" alt=""></p> <h3 id="云函数本地调试-传送门"><a href="#云函数本地调试-传送门" class="header-anchor">#</a> 云函数本地调试 (<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/local-debug.html" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</h3> <p>云开发提供了云函数本地调试功能，在本地提供了一套与线上一致的 <code>Node.js</code> 云函数运行环境，让开发者可以在本地对云函数调试，使用本地调试可以提高开发、调试效率：</p> <ul><li>单步调试/断点调试：比起通过云开发控制台中查看线上打的日志的方法进行调试，使用本地调试后可以对云函数 <code>Node.js</code>
! 实例进行单步调试/断点调试</li> <li>集成小程序测试：在模拟器中对小程序发起的交互点击等操作如果触发了开启了本地调试的云函数，会请求到本地实例而不是云端</li> <li>优化开发流程、提高开发效率：调试阶段不需上传部署云函数，在调试云函数时，相对于不使用本地调试时的调试流程（“本地修改代码 -&gt; 上传部署云函数 -&gt; 调用&quot;）的调试流程，省去了上传等待的步骤，改成只需 “本地修改 -&gt; 调用” 的流程，大大提高开发调试效率</li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9d8b8fb8126a4?w=1920&amp;h=1080&amp;f=gif&amp;s=4057034" alt="本地调试"></p> <h4 id="云函数运行环境差异"><a href="#云函数运行环境差异" class="header-anchor">#</a> 云函数运行环境差异</h4> <p>本地调试中的云函数<strong>运行环境</strong>与<strong>线上环境</strong>有如下区别：</p> <ul><li>本地调试中通过 <code>getWXContext</code> 获取的 <code>env</code> 值为 <code>local</code>，也就是不管小程序端指定访问哪个环境的云函数，如果该云函数开启了本地调试，都会被触发，且其中的 <code>getWXContext().env</code> 始终为 <code>local</code></li> <li>本地调试中不提供临时存储空间</li></ul> <h3 id="储存"><a href="#储存" class="header-anchor">#</a> 储存</h3> <p>在小程序端可以分别调用 <code>wx.cloud.uploadFile</code> 和 <code>wx.cloud.downloadFile</code> 完成上传和下载云文件操作。下面简单的几行代码，即可实现在小程序内让用户选择一张图片，然后<strong>上传到云端管理</strong>的功能：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 让用户选择一张图片</span>
wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">chooseResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将图片上传至云存储空间</span>
    wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定上传到的云路径</span>
      cloudPath<span class="token punctuation">:</span> <span class="token string">'my-photo.png'</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定要上传的文件的小程序临时文件路径</span>
      filePath<span class="token punctuation">:</span> chooseResult<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 成功回调</span>
      <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上传成功'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>下载文件</strong>，可以根据文件 ID 下载文件，用户仅可下载其有访问权限的文件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fileID<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 文件 ID</span>
  <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回临时文件路径</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  fail<span class="token punctuation">:</span> console<span class="token punctuation">.</span>error
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>云开发控制台-储存</strong> 提供对文件进行操作的功能。
<img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9dab315454c69?w=1928&amp;h=1048&amp;f=png&amp;s=180105" alt=""></p> <h3 id="计费相关-配额调整方式"><a href="#计费相关-配额调整方式" class="header-anchor">#</a> 计费相关 - 配额调整方式</h3> <p>在小程序<strong>云开发控制台 - 设置</strong> 里，可以选择适合自己的配额方案，我这里选择的免费的<code>基础版1</code> <img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9d9c536db677c?w=1254&amp;h=981&amp;f=png&amp;s=46744" alt=""></p> <h3 id="提交发布上线"><a href="#提交发布上线" class="header-anchor">#</a> 提交发布上线</h3> <p>小程序云开发整个 <code>上传代码 - 提交审核 - 发布版本</code> 与普通小程序开发一样。</p> <ul><li>修改了云函数后，在<code>clodfunctions</code>目录下的云函数文件夹右键，选择<strong>上传并部署：云端安装依赖（不上传node_module）</strong></li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9db813b62986d?w=1411&amp;h=915&amp;f=png&amp;s=40508" alt=""></p> <h3 id="小结："><a href="#小结：" class="header-anchor">#</a> 小结：</h3> <pre><code>微信小程序云开发为开发者提供完整的原生云端支持和微信服务支持，弱化后端和运维概念，无需搭建服务器，
使用平台提供的 API 进行核心业务开发，即可实现快速上线和迭代，
同时这一能力，同开发者已经使用的云服务相互兼容，并不互斥。
</code></pre> <ul><li>小程序云开发提供了相当友好的可视化界面，各类创建查看操作，一目了然。</li> <li>官方帮开发者打通了数据库跟服务端，并且对接微信服务。</li> <li>使用官方提供的API，通过云函数对数据库进行<strong>CRUD</strong>,返回给小程序端进行渲染</li> <li>很适合个人开发者，想开发一个小程序，无需其他费用（免费的基础版配额）</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lizheng0515/ignore/edit/master/docs/md/webBasics/README.md" target="_blank" rel="noopener noreferrer">你有不同的理解？</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/16/2020, 5:05:07 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/ignore/assets/js/app.d92b968c.js" defer></script><script src="/ignore/assets/js/2.6ccafa17.js" defer></script><script src="/ignore/assets/js/20.5acffc1c.js" defer></script>
  </body>
</html>
